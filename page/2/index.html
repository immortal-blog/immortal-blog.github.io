<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>Page 2 | Immortal Blog</title>
  <meta name="author" content="immortalt">
  
  <meta name="description" content="An awesome blog about software development and network security.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Immortal Blog"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <link id="modern-theme-css" rel="stylesheet" href="/css/modern-improvements.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  <script src="/js/theme-switcher.js"></script>
  
  <!-- analytics -->
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZJT0X50ELX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ZJT0X50ELX');
</script>



<meta name="generator" content="Hexo 6.0.0"></head>

 <body>
   

  <script type="text/javascript">
    (function(window, document, dataLayerName, id) {
    window[dataLayerName]=window[dataLayerName]||[],window[dataLayerName].push({start:(new Date).getTime(),event:"stg.start"});var scripts=document.getElementsByTagName('script')[0],tags=document.createElement('script');
    function stgCreateCookie(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toUTCString()}document.cookie=a+"="+b+d+"; path=/"}
    var isStgDebug=(window.location.href.match("stg_debug")||document.cookie.match("stg_debug"))&&!window.location.href.match("stg_disable_debug");stgCreateCookie("stg_debug",isStgDebug?1:"",isStgDebug?14:-1);
    var qP=[];dataLayerName!=="dataLayer"&&qP.push("data_layer_name="+dataLayerName),isStgDebug&&qP.push("stg_debug");var qPString=qP.length>0?("?"+qP.join("&")):"";
    tags.async=!0,tags.src="https://immortalt.containers.piwik.pro/"+id+".js"+qPString,scripts.parentNode.insertBefore(tags,scripts);
    !function(a,n,i){a[n]=a[n]||{};for(var c=0;c<i.length;c++)!function(i){a[n][i]=a[n][i]||{},a[n][i].api=a[n][i].api||function(){var a=[].slice.call(arguments,0);"string"==typeof a[0]&&window[dataLayerName].push({event:n+"."+i+":"+a[0],parameters:[].slice.call(arguments,1)})}}(i[c])}(window,"ppms",["tm","cm"]);
    })(window, document, 'dataLayer', '09a725f9-52e4-49d0-9691-6ccab4f70092');
    </script><noscript><iframe src="https://immortalt.containers.piwik.pro/09a725f9-52e4-49d0-9691-6ccab4f70092/noscript.html" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Immortal Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		</ul>
		<ul class="nav navbar-nav navbar-right">
		  <li>
			<a href="#" id="theme-toggle-btn" title="Switch between modern and retro themes">
			  <i class="fa fa-refresh"></i>Retro Theme
			</a>
		  </li>
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header logo">
  <h1>Immortal Blog<span class="blink-fast">âˆŽ</span></h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">


		<i class="fa fa-heart blink-slow"></i>

		An awesome blog about software development and network security.

</div>    

		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/devops/how-to-detect-and-solve-port-occupancy-in-linux.html" >How to detect and solve port occupancy in linux</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2022-03-06  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>Sometimes we may find that a program is occupying a port, and we cannot use this port.<br>We can use two commands to solve this problem.</p>
<h3 id="Find-the-program"><a href="#Find-the-program" class="headerlink" title="Find the program"></a>Find the program</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp | grep 4000</span><br><span class="line">tcp6       0      0 :::4000                 :::*                    LISTEN      81970/hexo</span><br></pre></td></tr></table></figure>

<p>Here we can find the pid 81970 before the program name.</p>
<h3 id="Kill-the-program"><a href="#Kill-the-program" class="headerlink" title="Kill the program"></a>Kill the program</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 81970</span><br></pre></td></tr></table></figure>

<p>If the permissions are not enough, add sudo before the command.</p>

	
	</div>
  <a type="button" href="/devops/how-to-detect-and-solve-port-occupancy-in-linux.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/devops/send-email-with-postfix-on-ubuntu.html" >Send email with postfix on Ubuntu</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2022-02-08  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>My method referenced many tutorials, fixed the errors and worked successfully.</p>
<h2 id="Install-mailutils"><a href="#Install-mailutils" class="headerlink" title="Install mailutils"></a>Install mailutils</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mailutils</span><br></pre></td></tr></table></figure>

<h2 id="Configure-username-and-password"><a href="#Configure-username-and-password" class="headerlink" title="Configure username and password"></a>Configure username and password</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/postfix/sasl_passwd</span><br></pre></td></tr></table></figure>

<p>Input SMTP server, account and password.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[smtp.126.com]:465 username@126.com:password</span><br></pre></td></tr></table></figure>

<p>The password of the 126 mailbox needs to generate an authorization code in the settings.<br>Then run postmap.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo postmap /etc/postfix/sasl_passwd</span><br></pre></td></tr></table></figure>
	
	</div>
  <a type="button" href="/devops/send-email-with-postfix-on-ubuntu.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/devops/create-socks-server-on-ubuntu20.04.html" >Create socks server on Ubuntu 20.04</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2021-10-09  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>In daily life, we may need to create a socks server to provide network for other hosts.<br>I summarized the method of creating socks service through dante-server under Ubuntu 20.04.</p>
<h3 id="install-dante-server"><a href="#install-dante-server" class="headerlink" title="install dante-server"></a>install dante-server</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install dante-server</span><br></pre></td></tr></table></figure>

<h3 id="add-user-for-dante-server"><a href="#add-user-for-dante-server" class="headerlink" title="add user for dante-server"></a>add user for dante-server</h3><p>Use this method to create a user to prevent it from logging in.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo useradd -s /sbin/nologin dante-socks</span><br></pre></td></tr></table></figure>

<h3 id="Edit-the-configuration-file"><a href="#Edit-the-configuration-file" class="headerlink" title="Edit the configuration file"></a>Edit the configuration file</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/danted.conf</span><br></pre></td></tr></table></figure>

<p>minimal configuration for dante-server</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">logoutput: syslog stdout</span><br><span class="line">internal: ztuku335yr port = 1080</span><br><span class="line">external: ens3</span><br><span class="line">user.notprivileged: dante-socks</span><br><span class="line">clientmethod: none</span><br><span class="line">socksmethod: none</span><br><span class="line">#allow connections from local network</span><br><span class="line">client pass &#123;</span><br><span class="line">        from: 10.0.0.229/24 to: 0.0.0.0/0</span><br><span class="line">        log: error # connect disconnect</span><br><span class="line">&#125;</span><br><span class="line">socks pass &#123;</span><br><span class="line">        from: 0.0.0.0/0 to: 0.0.0.0/0</span><br><span class="line">        command: bind connect udpassociate</span><br><span class="line">        log: error # connect disconnect iooperation</span><br><span class="line">&#125;</span><br><span class="line">socks pass &#123;</span><br><span class="line">        from: 0.0.0.0/0 to: 0.0.0.0/0</span><br><span class="line">        command: bindreply udpreply</span><br><span class="line">        log: error # connect disconnect iooperation</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/devops/create-socks-server-on-ubuntu20.04.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/devops/monitor-nvme-ssd-status.html" >Monitor the temperature and health status of nvme ssd in Ubuntu</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2021-08-09  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h3 id="Install-nvme-cli"><a href="#Install-nvme-cli" class="headerlink" title="Install nvme-cli"></a>Install nvme-cli</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nvme-cli</span><br></pre></td></tr></table></figure>

<h3 id="List-disks"><a href="#List-disks" class="headerlink" title="List disks"></a>List disks</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvme list</span><br></pre></td></tr></table></figure>

<h3 id="View-the-details-of-the-hard-drive"><a href="#View-the-details-of-the-hard-drive" class="headerlink" title="View the details of the hard drive"></a>View the details of the hard drive</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvme smart-log /dev/nvme0</span><br></pre></td></tr></table></figure>

<h3 id="Auto-refresh-status"><a href="#Auto-refresh-status" class="headerlink" title="Auto refresh status"></a>Auto refresh status</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo watch -n 1 nvme smart-log /dev/nvme0</span><br></pre></td></tr></table></figure>

<h3 id="Only-view-the-temperature-info"><a href="#Only-view-the-temperature-info" class="headerlink" title="Only view the temperature info"></a>Only view the temperature info</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvme smart-log /dev/nvme0 | grep &quot;^temperature&quot;</span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/devops/monitor-nvme-ssd-status.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/devops/create-a-private-ubuntu-mirror.html" >Create a private Ubuntu mirror</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2021-05-18  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>To create a private Ubuntu image, the commonly used tools are debmirror and apt-mirror.<br>As of today (2021-05-17), these two tools have their own advantages and disadvantages.</p>
<h2 id="debmirror"><a href="#debmirror" class="headerlink" title="debmirror"></a>debmirror</h2><p><a target="_blank" rel="noopener" href="https://help.ubuntu.com/community/Debmirror">debmirror document</a><br>debmirror has many downloading methods, and it will compare the local file with the file on the server before downloading so that only the missing files are downloaded. However, it does not seem to support multi-threaded downloading. Debmirror is downloaded one by one, so the download speed is relatively slow.</p>
<h2 id="apt-mirror"><a href="#apt-mirror" class="headerlink" title="apt-mirror"></a>apt-mirror</h2><p><a target="_blank" rel="noopener" href="https://apt-mirror.github.io/">apt-mirror document</a><br>apt-mirror supports 20 threads to download at the same time by default. If you choose a suitable mirror station, the download speed can reach the maximum of my network. However, it does not seem to make a comparison. Although it can speed up the download start speed, sometimes some files may be lost, resulting in an incomplete mirror, so the client<br>cannot be updated.</p>
<h3 id="how-to-write-the-config-file"><a href="#how-to-write-the-config-file" class="headerlink" title="how to write the config file"></a>how to write the config file</h3><p>In order to download the complete package, we need to modify the configuration file in <code>/etc/apt/mirror.list</code>. Use this format to ensure that the i386 package will be downloaded.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb-amd64 http://mirrors.aliyun.com/ubuntu focal main restricted universe multiverse</span><br><span class="line">deb-i386 http://mirrors.aliyun.com/ubuntu focal main restricted universe multiverse</span><br></pre></td></tr></table></figure>

<h2 id="Combine-them-together"><a href="#Combine-them-together" class="headerlink" title="Combine them together"></a>Combine them together</h2><p>Therefore, in order to achieve a balance between efficiency and completeness, we can combine apt-mirror and debmirror.<br>We can first use apt-mirror to download quickly, then we can use debmirror to check and download the missing packages.<br>Maybe this is the best way to download the Ubuntu mirror.</p>

	
	</div>
  <a type="button" href="/devops/create-a-private-ubuntu-mirror.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/git/common-operations-of-git.html" >Common operations of Git</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2021-04-30  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h3 id="Commit-code"><a href="#Commit-code" class="headerlink" title="Commit code"></a>Commit code</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;feat: xxxxxx&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="How-to-revoke-after-commit"><a href="#How-to-revoke-after-commit" class="headerlink" title="How to revoke after commit"></a>How to revoke after commit</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft HEAD^</span><br></pre></td></tr></table></figure>

<p>This successfully revoked the commit. Note that only the commit operation is withdrawn, and the code modification remains.</p>
<h4 id="git-reset-parameters"><a href="#git-reset-parameters" class="headerlink" title="git reset parameters"></a>git reset parameters</h4><p><code>--mixed</code><br>do not delete the workspace to change the code, cancel the commit, and cancel the <code>git add .</code> operation. This is the default parameter.</p>
<p><code>--soft</code><br>do not delete the workspace to change the code, cancel the commit, and do not cancel the <code>git add .</code>.</p>
<p><code>--hard</code><br>delete workspace change code, revoke commit, revoke <code>git add .</code>. After completing this operation, it is restored to the last commit state.</p>
	
	</div>
  <a type="button" href="/git/common-operations-of-git.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/frontend/install-nodejs-on-linux.html" >Install Node.js on Linux</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2021-02-14  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="Using-NodeSource"><a href="#Using-NodeSource" class="headerlink" title="Using NodeSource"></a>Using NodeSource</h2><p>Refer to the <a target="_blank" rel="noopener" href="https://github.com/nodesource/distributions/blob/master/README.md">NodeSource documentation</a> for more information on the available versions.</p>
<h3 id="Node-js-v14-x"><a href="#Node-js-v14-x" class="headerlink" title="Node.js v14.x:"></a>Node.js v14.x:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Using Ubuntu</span></span><br><span class="line">curl -fsSL https://deb.nodesource.com/setup_14.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Using Debian, as root</span></span><br><span class="line">curl -fsSL https://deb.nodesource.com/setup_14.x | bash -</span><br><span class="line">apt-get install -y nodejs</span><br></pre></td></tr></table></figure>

<h3 id="Upgrade-npm"><a href="#Upgrade-npm" class="headerlink" title="Upgrade npm"></a>Upgrade npm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npm</span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/frontend/install-nodejs-on-linux.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/devops/online-expansion-of-ubuntu-lvm-disk.html" >Online expansion of Ubuntu LVM disk</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2021-02-07  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="LVM-overview"><a href="#LVM-overview" class="headerlink" title="LVM overview"></a>LVM overview</h2><p><img src="/images/online-expansion-of-ubuntu-lvm-disk/lvm.png" alt="lvm"></p>
<h3 id="Physical-Volume-PV"><a href="#Physical-Volume-PV" class="headerlink" title="Physical Volume (PV)"></a>Physical Volume (PV)</h3><p>Refers to a disk partition, or a device (such as RAID) that has the same function as a disk partition. It is the basic storage logical block of LVM, but compared with basic physical storage media (such as partitions, disks, etc.), it contains LVM-related Management parameters.</p>
<h3 id="Volume-Group-VG"><a href="#Volume-Group-VG" class="headerlink" title="Volume Group (VG)"></a>Volume Group (VG)</h3><p>Similar to a physical disk in a non-LVM system, it is composed of one or more physical volumes PV. One or more LVs (logical volumes) can be created on the volume group.</p>
<h3 id="Logical-Volume-LV"><a href="#Logical-Volume-LV" class="headerlink" title="Logical Volume (LV)"></a>Logical Volume (LV)</h3><p>Similar to disk partitions in non-LVM systems, logical volumes are built on the volume group VG. A file system (such as &#x2F;home or &#x2F;usr, etc.) can be established on the logical volume LV.</p>
	
	</div>
  <a type="button" href="/devops/online-expansion-of-ubuntu-lvm-disk.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/golang/use-pprof-for-golang-program-memory-analysis.html" >Use pprof for golang program memory analysis</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2021-01-08  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>When using golang to write complex projects, it is often useful to use multi-coroutine concurrency scenarios. At this time, it is easy to cause the problem of coroutine leaks due to negligence, and then produce similar memory leaks. This article focuses on the investigation of coroutine leaks, and provides ideas and practices for visual analysis of golang program memory.</p>
<h2 id="Introduction-to-pprof"><a href="#Introduction-to-pprof" class="headerlink" title="Introduction to pprof"></a>Introduction to pprof</h2><p>pprof is a tool for visualization and analysis of profiling data.<br>pprof reads a collection of profiling samples in profile.proto format and generates reports to visualize and help analyze the data. It can generate both text and graphical reports (through the use of the dot visualization package).</p>
<h2 id="How-to-use-pprof"><a href="#How-to-use-pprof" class="headerlink" title="How to use pprof"></a>How to use pprof</h2><h3 id="Add-monitoring-code"><a href="#Add-monitoring-code" class="headerlink" title="Add monitoring code"></a>Add monitoring code</h3><p>First, we need to add monitoring code in the golang program, and expose it through the http interface.</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> _ <span class="string">&quot;net/http/pprof&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		_ = http.ListenAndServe(<span class="string">&quot;0.0.0.0:8081&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="comment">// your code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then we start the program that needs to be analyzed, and we are ready to analyze it.</p>
	
	</div>
  <a type="button" href="/golang/use-pprof-for-golang-program-memory-analysis.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-12">
		<h3 class="title">
			<a href="/devops/improve-your-ubuntu-performance.html" >Improve your Ubuntu performance</a>
		</h3>
		</div>
	<div class="col-md-12">
		<div class="date">post @ 2021-01-05  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>When you install the Ubuntu system on a physical machine, donâ€™t forget to do these things to improve your computerâ€™s performance.<br>My experiments found that the improvement was very noticeable, based on Ubuntu 20.10.</p>
<h2 id="use-s-tui-to-monitor-and-test-your-max-CPU-frequency"><a href="#use-s-tui-to-monitor-and-test-your-max-CPU-frequency" class="headerlink" title="use s-tui to monitor and test your max CPU frequency"></a>use s-tui to monitor and test your max CPU frequency</h2><p><img src="/images/improve-your-ubuntu-performance/s-tui.png" alt="s-tui"></p>
<h3 id="how-to-install"><a href="#how-to-install" class="headerlink" title="how to install"></a>how to install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3-pip stress</span><br><span class="line">sudo pip3 install s-tui</span><br></pre></td></tr></table></figure>

<h3 id="how-to-use"><a href="#how-to-use" class="headerlink" title="how to use"></a>how to use</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo s-tui</span><br></pre></td></tr></table></figure>

<p>You can use the arrow keys and space bar to switch between Monitor mode and Stress mode. The Stress mode performs a stress test on the CPU.</p>
<h2 id="use-indicator-cpufreq-to-set-your-CPU-frequency"><a href="#use-indicator-cpufreq-to-set-your-CPU-frequency" class="headerlink" title="use indicator-cpufreq to set your CPU frequency"></a>use indicator-cpufreq to set your CPU frequency</h2><p><img src="/images/improve-your-ubuntu-performance/indicator-cpufreq.png" alt="indicator-cpufreq"></p>
<h3 id="how-to-install-1"><a href="#how-to-install-1" class="headerlink" title="how to install"></a>how to install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install indicator-cpufreq</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>

<h3 id="how-to-use-1"><a href="#how-to-use-1" class="headerlink" title="how to use"></a>how to use</h3><p>Look at the status bar icon in the upper right corner and click on the emerging icon to set the CPUâ€™s performance mode.</p>

	
	</div>
  <a type="button" href="/devops/improve-your-ubuntu-performance.html#more" class="btn btn-default more">Read More</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">

   
    
     <a href="/" type="button" class="btn btn-default"><i class="fa fa-arrow-circle-o-left"></i> Prev</a>
      

        <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
 
       <a href="/page/3/" type="button" class="btn btn-default ">Next<i class="fa fa-arrow-circle-o-right"></i></a>     
        

  
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>Categories</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/devops/">devops<span>13</span></a></li>
		
			<li><a href="/categories/frontend/">frontend<span>1</span></a></li>
		
			<li><a href="/categories/git/">git<span>1</span></a></li>
		
			<li><a href="/categories/golang/">golang<span>2</span></a></li>
		
			<li><a href="/categories/idea/">idea<span>3</span></a></li>
		
			<li><a href="/categories/privacy/">privacy<span>2</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>Tag Cloud</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/git/">git<span>1</span></a></li>
		
			<li><a href="/tags/virtualization/">virtualization<span>1</span></a></li>
		
			<li><a href="/tags/linux/">linux<span>7</span></a></li>
		
			<li><a href="/tags/vmware/">vmware<span>1</span></a></li>
		
			<li><a href="/tags/ubuntu/">ubuntu<span>7</span></a></li>
		
			<li><a href="/tags/security/">security<span>1</span></a></li>
		
			<li><a href="/tags/golang/">golang<span>2</span></a></li>
		
			<li><a href="/tags/privacy/">privacy<span>2</span></a></li>
		
			<li><a href="/tags/devops/">devops<span>12</span></a></li>
		
			<li><a href="/tags/algorithm/">algorithm<span>1</span></a></li>
		
			<li><a href="/tags/frontend/">frontend<span>1</span></a></li>
		
			<li><a href="/tags/windows/">windows<span>1</span></a></li>
		
			<li><a href="/tags/idea/">idea<span>5</span></a></li>
		
		 
		</ul>
	</div>


		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/immortalt" title="My Github account." target="_blank">My Github</a></li>
	
	</ul>
</div>


		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/devops/disable-vbs-on-windows-11-24h2.html" ><i class="fa fa-file-o"></i>The Ultimate Guide to Disab...</a>
      </li>
    
      <li>
        <a href="/how_to_enable_mouse_side_buttons_on_a_vmware_vm.html" ><i class="fa fa-file-o"></i>How to enable mouse side bu...</a>
      </li>
    
      <li>
        <a href="/devops/remove-news-widgets-of-windows-11-to-improve-performance.html" ><i class="fa fa-file-o"></i>Remove News Widgets of Wind...</a>
      </li>
    
      <li>
        <a href="/privacy/personal-note-editing-software-research.html" ><i class="fa fa-file-o"></i>Personal note editing softw...</a>
      </li>
    
      <li>
        <a href="/devops/copy_and_paste_content_to_markdown.html" ><i class="fa fa-file-o"></i>Copy and paste content to m...</a>
      </li>
    
  </ul>
</div>

		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2025 immortalt
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a>, <a href="https://github.com/wzpan/hexo-theme-freemind" target="_blank">freemind</a> and <a href="https://github.com/blackshow/hexo-theme-freemind.386" target="_blank">freemind.386</a>.
     <br> Theme by <a target="_blank" rel="noopener" href="https://github.com/immortal-blog/hexo-theme-freemind.386.plus">Freemind.386.plus</a>.    
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>â¬†ï¸ŽTOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
